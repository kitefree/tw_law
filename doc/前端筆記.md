# 前端筆記

使用技術

`vuejs` 2.6.14

`bootstrap` 4.5.3

`BootstrapVue `2.21.2

`vue-loading-overlay` 3.4.2

[bootstrapVue](https://bootstrap-vue.org/)



## 功能

### 高亮字串

```vue
    <tr v-for="(item,key) in results" :key="item.AA001">
      <td>{{ key }}</td>
      <td class="text-start"><span v-html="replace_key_word(item.AA004)"></span> ({{format_date(item.AA007)}})</td>
    </tr>
```

​	

```vue
	methods:{
        replace_key_word (w) {
          const reg = new RegExp(this.txtkw, 'g')
          return w.replace(reg, `<span style="color: red;">${this.txtkw}</span>`)
        }
    }
```



### 文字框enter

```vue
    <input type="text" name="txtkw" id="txtkw" v-model="txtkw" @keyup.enter="query()" />&nbsp;&nbsp;
    <input type="button" name="btnQuery" id="btnQuery" value="送出" class="btn btn-secondary" v-on:click="query()" />
```



### 斜線r斜線n

```HTML
<pre>You can see the newline after me!
Woohoo!</pre>
```

sql儲存內容裡有`\r\n`想要完整有換行的效果可以使用`<pre>`



### 西元轉民國

```js
    format_date (d) {
      const tempDate = d - 19110000
      let year = null
      let month = null
      let day = null
      if ((tempDate).toString().length === 7) {
        year = tempDate.toString().slice(0, 3)
        month = tempDate.toString().slice(3, 5)
        day = tempDate.toString().slice(5, 7)
      } else {
        year = tempDate.toString().slice(0, 2)
        month = tempDate.toString().slice(2, 4)
        day = tempDate.toString().slice(4, 6)
      }
      return `民國 ${year} 年 ${month} 月 ${day} 日 `
    }
```

註記

> 像這種常用的，應該花時間來提到上層去



### vue loading 

`main.js` 入口

```js
import Loading from 'vue-loading-overlay'
// Import stylesheet
import 'vue-loading-overlay/dist/vue-loading.css'
// Init plugin
Vue.component('Loading', Loading)
```



`home.js`

```js
<div>
<loading :active.sync="isLoading"></loading>
</div>

export default {
  methods: {
    search_query () {
    const self = this   
    self.isLoading = true

    axios.get(`${GLOBAL.baseURL}/api.php`, { params: { api: 'search_query_AA', txtkw: self.txtkw } }).then(function (response) {
      ...
      self.isLoading = false        
    })
  }
}
```



## build

### dist index.html 檔案引用路徑問題

npm run build 時，加入此檔案，build 出的index.html 關聯的js,css 才不會報錯誤

`vue.config.js`

```js
module.exports = {
  publicPath: process.env.NODE_ENV === 'production' ? './' : '/'
//   devServer: {
//     public: 'localhost'
//   }
}

```



### api url 路徑問題

`src/api/config.js`

```js
// build dev
const baseURL = 'http://localhost/law'
export default {
  baseURL
}
```

`Home.vue`

```js
import GLOBAL from '../api/config'
...
axios.get(`${GLOBAL.baseURL}/api.php`, { params: { api: 'search_query_AA', txtkw: self.txtkw } }).then(function (response) {
      console.log(response.data)
      self.AA_results = response.data
      self.AA_rows = self.AA_results.length
      return axios.get(`${GLOBAL.baseURL}/api.php`, { params: { api: 'search_query_AC', txtkw: self.txtkw } })
})
...

```

之後應可以朝`dev` `production` 兩個版本設定兩個`webpack.develope.confg.js` `webpack.production.confg.js` 去讀取不同參數

